<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sports">
	
	<!-- 회원 가입 -->
	<insert id="register" parameterType="UserVO">
		INSERT INTO SPORT_USER (email, nickname, password, phone, gender, image)
		VALUES (#{email}, #{nickname}, #{password}, #{phone}, #{gender}, 
		<choose>
            <when test="image != null">
                #{image}
            </when>
            <otherwise>
                NULL
            </otherwise>
        </choose>
		)
	</insert>

	<!-- 이메인 중복 확인 -->
	<select id="emailDuplicateCheck" parameterType="string" resultType="boolean">
		SELECT CASE
		         WHEN EXISTS (SELECT 1 FROM SPORT_USER WHERE EMAIL = #{email}) THEN 'True'
		         ELSE 'False'
		       END AS Is_Exists
		FROM dual
	</select>
	
	<!-- 로그인 -->
	<select id="authenticateUser" parameterType="UserVO" resultType="UserVO">
	    SELECT * FROM SPORT_USER 
	    WHERE EMAIL = #{email} AND PASSWORD = #{password}
	</select>
	
	<!--  자유게시판 전체글 조회 -->
	<select id="boardAll" resultType="BoardVO">
		SELECT * FROM FREE_BBS
	</select>
	
	<!-- 자유게시판 글 작성 -->
	<insert id="writeBoard" parameterType="BoardVO">
		
	</insert>
</mapper>














